# 数据库初始化指南

## 问题描述
编译成功但运行时出现 BeanCreationException 错误，主要原因是数据库中缺少 `match_config` 表。

## 解决步骤

### 1. 确保 MySQL 服务运行
确保本地 MySQL 服务正在运行，端口为 3306。

### 2. 创建数据库
```sql
CREATE DATABASE IF NOT EXISTS valuesfriends;
USE valuesfriends;
```

### 3. 执行建表脚本
执行项目中的 `sql/create_table.sql` 文件，该文件已包含所有必要的表结构：
- user 表（用户表）
- team 表（队伍表）
- user_team 表（用户队伍关系表）
- match_config 表（匹配配置表）

### 4. 验证表创建
执行以下 SQL 验证表是否创建成功：
```sql
SHOW TABLES;
SELECT * FROM match_config;
```

### 5. 检查配置文件
确认 `src/main/resources/application.yml` 中的数据库配置正确：
```yaml
spring:
  datasource:
    driver-class-name: com.mysql.cj.jdbc.Driver
    url: jdbc:mysql://localhost:3306/valuesfriends
    username: root
    password: 200508  # 请修改为你的 MySQL 密码
```

### 6. 重新启动应用
```bash
cd "d:\Program code\java\valuedfriends"
mvn clean spring-boot:run
```

## 常见问题

### Q1: 连接数据库失败
- 检查 MySQL 服务是否启动
- 确认用户名密码是否正确
- 确认数据库名称是否为 `valuesfriends`

### Q2: 表不存在错误
- 确保执行了完整的 `create_table.sql` 脚本
- 检查是否有权限创建表

### Q3: Redis 连接失败
- 如果不使用 Redis，可以注释掉 application.yml 中的 Redis 配置
- 或者启动本地 Redis 服务

## 修复的主要问题

1. **类型不匹配**: 修复了 `MatchServiceImpl` 中 `taskExecutor` 的类型从 `ThreadPoolExecutor` 改为 `Executor`
2. **缺少数据库表**: 在 `create_table.sql` 中添加了 `match_config` 表的创建语句
3. **方法调用错误**: 修复了 `UserRecommendVO` 相关的方法调用问题

执行以上步骤后，应用应该能够正常启动。